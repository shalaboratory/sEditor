class sEditor{constructor(){this.config={selector:"#seditor",plugins:{image:!0,link:!0,source:!0},darkMode:!1},this.savedRange=null,this.isSourceMode=!1,this.isFullScreen=!1,this.isDarkMode=!1,this.icons={undo:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M288-192v-72h288q50 0 85-35t35-85q0-50-35-85t-85-35H330l93 93-51 51-180-180 180-180 51 51-93 93h246q80 0 136 56t56 136q0 80-56 136t-136 56H288Z"/></svg>',redo:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M384-192q-80 0-136-56t-56-136q0-80 56-136t136-56h246l-93-93 51-51 180 180-180 180-51-51 93-93H384q-50 0-85 35t-35 85q0 50 35 85t85 35h288v72H384Z"/></svg>',bold:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M266-192v-576h227.95q67.05 0 123.55 41.32Q674-685.35 674-612q0 51-22.5 79.5T609-490.96Q635-479 665-448t30 91q0 91-67.03 128t-125.81 37H266Zm127-118h104.68Q546-310 556-334.5t10-35.5q0-11-10.5-35.5T494-430H393v120Zm0-232h93q33 0 48.5-17.5T550-597q0-24-17.11-39t-44.28-15H393v109Z"/></svg>',italic:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M216-192v-96h160l124-384H336v-96h408v96H596L472-288h152v96H216Z"/></svg>',underline:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M240-144v-72h480v72H240Zm240-144q-96 0-148.5-59.4T279-504.86V-816h97.21v317.09q0 52.85 26.43 85.88Q429.07-380 480.03-380q50.97 0 77.39-33.03 26.41-33.03 26.41-85.88V-816H681v311.14q0 98.06-52.5 157.46Q576-288 480-288Z"/></svg>',strike:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M486-196q-72 0-126-42t-72-111l81-33q16 51 46.5 77t72.5 26q45 0 71.5-21.5T586-358q0-16-6-29.5T562-412h103q5 11 6.5 23.5T673-359q0 72-52 117.5T486-196ZM96-484v-72h768v72H96Zm384-288q64 0 106 27t68 86l-78 34q-11-30-36.5-48.5T482-692q-37 0-61.5 18T394-628h-87q2-63 51-103.5T480-772Z"/></svg>',link:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M432-288H288q-79.68 0-135.84-56.23Q96-400.45 96-480.23 96-560 152.16-616q56.16-56 135.84-56h144v72H288q-50 0-85 35t-35 85q0 50 35 85t85 35h144v72Zm-96-156v-72h288v72H336Zm192 156v-72h144q50 0 85-35t35-85q0-50-35-85t-85-35H528v-72h144q79.68 0 135.84 56.23 56.16 56.22 56.16 136Q864-400 807.84-344 751.68-288 672-288H528Z"/></svg>',img:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M216-144q-29.7 0-50.85-21.5Q144-187 144-216v-528q0-29 21.15-50.5T216-816h528q29.7 0 50.85 21.5Q816-773 816-744v528q0 29-21.15 50.5T744-144H216Zm0-72h528v-528H216v528Zm48-72h432L552-480 444-336l-72-96-108 144Zm-48 72v-528 528Z"/></svg>',superscript:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M720-576v-95.67Q720-692 733.8-706t34.2-14h48v-48h-96v-48h96q20.4 0 34.2 13.75 13.8 13.76 13.8 34.09v47.83Q864-700 850.2-686T816-672h-48v48h96v48H720ZM270-192l159-250-148-230h90.79L478-501l110-171h91L530-442l160 250h-91L482-378 361-192h-91Z"/></svg>',subscript:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M720-144v-95.67Q720-260 733.8-274t34.2-14h48v-48h-96v-48h96q20.4 0 34.2 13.75 13.8 13.76 13.8 34.09v47.83Q864-268 850.2-254T816-240h-48v48h96v48H720ZM270-288l159-250-148-230h90.79L478-597l110-171h91L530-538l160 250h-91L482-474 361-288h-91Z"/></svg>',leftAlign:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M144-144v-72h672v72H144Zm0-150v-72h480v72H144Zm0-150v-72h672v72H144Zm0-150v-72h480v72H144Zm0-150v-72h672v72H144Z"/></svg>',centerAlign:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M144-144v-72h672v72H144Zm144-150v-72h384v72H288ZM144-444v-72h672v72H144Zm144-150v-72h384v72H288ZM144-744v-72h672v72H144Z"/></svg>',rightAlign:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M144-744v-72h672v72H144Zm192 150v-72h480v72H336ZM144-444v-72h672v72H144Zm192 150v-72h480v72H336ZM144-144v-72h672v72H144Z"/></svg>',justifyAlign:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M144-144v-72h672v72H144Zm0-150v-72h672v72H144Zm0-150v-72h672v72H144Zm0-150v-72h672v72H144Zm0-150v-72h672v72H144Z"/></svg>',unorderedList:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M360-240v-72h456v72H360Zm0-204v-72h456v72H360Zm0-204v-72h456v72H360ZM215.79-204Q186-204 165-225.21t-21-51Q144-306 165.21-327t51-21Q246-348 267-326.79t21 51Q288-246 266.79-225t-51 21Zm0-204Q186-408 165-429.21t-21-51Q144-510 165.21-531t51-21Q246-552 267-530.79t21 51Q288-450 266.79-429t-51 21Zm0-204Q186-612 165-633.21t-21-51Q144-714 165.21-735t51-21Q246-756 267-734.79t21 51Q288-654 266.79-633t-51 21Z"/></svg>',orderedList:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M144-144v-48h96v-24h-48v-48h48v-24h-96v-48h120q10.2 0 17.1 6.9 6.9 6.9 6.9 17.1v48q0 10.2-6.9 17.1-6.9 6.9-17.1 6.9 10.2 0 17.1 6.9 6.9 6.9 6.9 17.1v48q0 10.2-6.9 17.1-6.9 6.9-17.1 6.9H144Zm0-240v-96q0-10.2 6.9-17.1 6.9-6.9 17.1-6.9h72v-24h-96v-48h120q10.2 0 17.1 6.9 6.9 6.9 6.9 17.1v72q0 10.2-6.9 17.1-6.9 6.9-17.1 6.9h-72v24h96v48H144Zm48-240v-144h-48v-48h96v192h-48Zm168 384v-72h456v72H360Zm0-204v-72h456v72H360Zm0-204v-72h456v72H360Z"/></svg>',hr:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M192-444v-72h576v72H192Z"/></svg>',code:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M336-240 96-480l240-240 51 51-189 189 189 189-51 51Zm288 0-51-51 189-189-189-189 51-51 240 240-240 240Z"/></svg>',clear:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="m503-558-73-73-88-88h426v96H531l-28 65ZM768-89 442-415l-76 176H262l107-249L90-767l51-51 678 678-51 51Z"/></svg>',color:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M96 0v-192h768V0H96Zm161-336 180-480h86l180 480h-83l-43-123H384l-44 123h-83Zm151-192h144l-70-194h-4l-70 194Z"/></svg>',fullscreen:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M144-144v-192h72v120h120v72H144Zm480 0v-72h120v-120h72v192H624ZM144-624v-192h192v72H216v120h-72Zm600 0v-120H624v-72h192v192h-72Z"/></svg>',exitFullscreen:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M264-144v-120H144v-72h192v192h-72Zm360 0v-192h192v72H696v120h-72ZM144-624v-72h120v-120h72v192H144Zm480 0v-192h72v120h120v72H624Z"/></svg>',sun:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M480-360q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35Zm-.23 72Q400-288 344-344.23q-56-56.22-56-136Q288-560 344.23-616q56.22-56 136-56Q560-672 616-615.77q56 56.22 56 136Q672-400 615.77-344q-56.22 56-136 56ZM216-444H48v-72h168v72Zm696 0H744v-72h168v72ZM444-744v-168h72v168h-72Zm0 696v-168h72v168h-72ZM269-642 166-742l51-55 102 104-50 51Zm474 475L642-268l49-51 103 101-51 51ZM640-691l102-101 51 49-100 103-53-51ZM163-217l105-99 49 47-98 104-56-52Zm317-263Z"/></svg>',moon:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M479.96-144Q340-144 242-242t-98-238q0-140 97.93-238t237.83-98q13.06 0 25.65 1 12.59 1 25.59 3-39 29-62 72t-23 92q0 85 58.5 143.5T648-446q49 0 92-23t72-62q2 13 3 25.59t1 25.65q0 139.9-98.04 237.83t-238 97.93Zm.04-72q82 0 148.78-47.07Q695.55-310.15 727-386q-20 5-39.67 8.5Q667.67-374 648-374q-113.86 0-193.93-80.07Q374-534.14 374-648q0-19.67 3.5-39.33Q381-707 386-727q-75.85 31.45-122.93 98.22Q216-562 216-480q0 110 77 187t187 77Zm-14-250Z"/></svg>'},this.applyStyles()}getAncestor(e,t){if(!e)return null;for(t=t.toUpperCase(),e=3===e.nodeType?e.parentElement:e;e&&e.tagName!==t;)e=e.parentElement;return e}run(e){this.config={...this.config,...e},this.target=document.querySelector(this.config.selector),this.target&&(this.initUI(),this.initDarkMode(),this.initEventListeners())}getContent(){return this.isSourceMode?this.sourceView.value:this.editor.innerHTML}setContent(e){this.editor&&(this.editor.innerHTML=e),this.sourceView&&(this.sourceView.value=e),this.updateStatus()}initUI(){this.target.className="se-main-wrapper",this.target.innerHTML='\n            <div class="se-toolbar"></div>\n            <div class="se-editor-window">\n                <div class="se-content" contenteditable="true" spellcheck="true"></div>\n                <textarea class="se-source" style="display:none"></textarea>\n            </div>\n            <div class="se-statusbar">\n                <div class="se-stats">\n                    <span class="se-wc">Words: 0</span> | <span class="se-cc">Chars: 0</span>\n                </div>\n                <div class="se-brand">\n                    Powered by <a href="https://shalab.netlify.app/" target="_blank" rel="noopener">ShaLab</a>\n                </div>\n            </div> \n            <div class="se-modal-container"></div>\n        ',this.toolbar=this.target.querySelector(".se-toolbar"),this.editor=this.target.querySelector(".se-content"),this.sourceView=this.target.querySelector(".se-source"),this.modalContainer=this.target.querySelector(".se-modal-container"),this.wcDisplay=this.target.querySelector(".se-wc"),this.ccDisplay=this.target.querySelector(".se-cc"),this.buildToolbar(),this.initDarkMode()}buildToolbar(){this.createBtn("undo",this.icons.undo,"Undo (Ctrl+Z)"),this.createBtn("redo",this.icons.redo,"Redo (Ctrl+Y)"),this.addDivider();const e=document.createElement("select");e.className="se-select";[{v:"p",t:"Paragraph"},{v:"blockquote",t:"Quote"},{v:"h1",t:"Header 1"},{v:"h2",t:"Header 2"},{v:"h3",t:"Header 3"},{v:"h4",t:"Header 4"}].forEach((t=>e.add(new Option(t.t,t.v)))),e.onchange=e=>this.execute("formatBlock",e.target.value),this.toolbar.appendChild(e),this.addDivider(),this.createBtn("bold",this.icons.bold,"Bold (Ctrl+B)"),this.createBtn("italic",this.icons.italic,"Italic (Ctrl+I)"),this.createBtn("underline",this.icons.underline,"Underline"),this.createBtn("strikeThrough",this.icons.strike,"Strikethrough"),this.createBtn("superscript",this.icons.superscript,"Superscript"),this.createBtn("subscript",this.icons.subscript,"Subscript"),this.createBtn("removeFormat",this.icons.clear,"Remove Format"),this.addDivider(),this.createBtn("justifyLeft",this.icons.leftAlign,"Left"),this.createBtn("justifyCenter",this.icons.centerAlign,"Center"),this.createBtn("justifyRight",this.icons.rightAlign,"Right"),this.createBtn("justifyFull",this.icons.justifyAlign,"Justify"),this.addDivider(),this.createBtn("insertUnorderedList",this.icons.unorderedList,"Unordered List"),this.createBtn("insertOrderedList",this.icons.orderedList,"Ordered List"),this.createBtn("insertHorizontalRule",this.icons.hr,"Horizontal Line"),this.addDivider(),this.config.plugins.link&&this.createBtn("link",this.icons.link,"Insert Link",(()=>this.openLinkModal())),this.config.plugins.image&&this.createBtn("image",this.icons.img,"Insert Image",(()=>this.openImageModal())),this.addDivider();const t=document.createElement("div");t.className="se-btn se-color-picker-wrapper",t.title="Text Color",t.innerHTML=this.icons.color;const s=document.createElement("input");s.type="color",s.className="se-color-input",s.oninput=e=>{this.execute("foreColor",e.target.value)},t.appendChild(s),this.toolbar.appendChild(t),this.createBtn("toggleDarkMode",this.icons.moon,"Dark Mode",(()=>this.toggleDarkMode())),this.createBtn("fullscreen",this.icons.fullscreen,"Full Screen",(()=>this.toggleFullScreen()));const i=document.createElement("button");i.className="se-btn se-btn-html",i.innerHTML=this.icons.code+'<span style="margin-left:5px">View HTML</span>',i.onclick=()=>this.toggleSource(),this.toolbar.appendChild(i)}createBtn(e,t,s,i){const o=document.createElement("button");o.className="se-btn",o.dataset.command=e,o.innerHTML=t,o.title=s,o.onclick=t=>{t.preventDefault(),this.isSourceMode||(i?(this.saveSelection(),i()):this.execute(e))},this.toolbar.appendChild(o)}addDivider(){const e=document.createElement("div");e.className="se-divider",this.toolbar.appendChild(e)}execute(e,t=null){this.editor.focus(),document.execCommand(e,!1,t),this.updateStatus()}saveSelection(){const e=window.getSelection();e.rangeCount>0&&(this.savedRange=e.getRangeAt(0))}restoreSelection(){if(this.savedRange){const e=window.getSelection();e.removeAllRanges(),e.addRange(this.savedRange)}}initEventListeners(){this.editor.addEventListener("keydown",(e=>{if(e.ctrlKey||e.metaKey){const t=e.key.toLowerCase();"b"===t&&(e.preventDefault(),this.execute("bold")),"i"===t&&(e.preventDefault(),this.execute("italic")),"u"===t&&(e.preventDefault(),this.execute("underline")),"z"===t&&(e.preventDefault(),this.execute("undo")),"y"===t&&(e.preventDefault(),this.execute("redo"))}})),this.editor.addEventListener("mouseup",(()=>this.updateToolbarState())),this.editor.addEventListener("keyup",(()=>this.updateToolbarState())),this.editor.oninput=()=>{this.updateStatus(),this.updateToolbarState()}}updateStatus(){const e=this.editor.innerText.trim();this.wcDisplay.innerText=`Words: ${e?e.split(/\s+/).length:0}`,this.ccDisplay.innerText=`Chars: ${e.length}`}updateToolbarState(){["bold","italic","underline","strikeThrough","superscript","subscript","insertUnorderedList","insertOrderedList","justifyLeft","justifyCenter","justifyRight","justifyFull"].forEach((e=>{const t=this.toolbar.querySelector(`[data-command="${e}"]`);t&&t.classList.toggle("active",document.queryCommandState(e))}));const e=this.toolbar.querySelector(".se-select");e&&(e.value=document.queryCommandValue("formatBlock")||"p")}toggleSource(){this.isSourceMode=!this.isSourceMode;const e=this.toolbar.querySelector(".se-btn-html");this.isSourceMode?(this.sourceView.value=this.editor.innerHTML,this.editor.style.display="none",this.sourceView.style.display="block",e.classList.add("active"),this.toolbar.classList.add("source-active")):(this.editor.innerHTML=this.sourceView.value,this.sourceView.style.display="none",this.editor.style.display="block",e.classList.remove("active"),this.toolbar.classList.remove("source-active"))}openLinkModal(){this.saveSelection();const e=window.getSelection(),t=this.getAncestor(e.anchorNode,"A"),s=!!t;if(s){const s=document.createRange();s.selectNode(t),e.removeAllRanges(),e.addRange(s),this.saveSelection()}const i=`\n            <label class="se-modal-label">URL</label>\n            <input type="text" class="se-modal-input" id="se-link-url" placeholder="https://example.com" value="${s?t.getAttribute("href"):""}">\n            <label class="se-modal-label">Text to display</label>\n            <input type="text" class="se-modal-input" id="se-link-text" placeholder="Text to display" value="${s?t.innerText:e.toString()}">\n            <div class="se-modal-checkbox">\n                <input type="checkbox" id="se-link-target" ${!!s&&"_blank"===t.target?"checked":""}>\n                <label for="se-link-target">Open in new tab</label>\n            </div>\n        `,o=this.createModal(s?"Edit Link":"Insert Link",i);if(s){const e=document.createElement("button");e.className="se-btn-cancel",e.style.marginRight="auto",e.style.color="#dc3545",e.innerText="Remove Link",e.onclick=()=>{this.restoreSelection(),this.execute("unlink"),this.closeModal()};const t=this.modalContainer.querySelector(".se-modal-actions");t.insertBefore(e,t.firstChild)}o.onConfirm=()=>{this.restoreSelection();const e=document.getElementById("se-link-url").value,t=document.getElementById("se-link-text").value,s=document.getElementById("se-link-target").checked;if(!e)return;const i=`<a href="${e}" ${s?'target="_blank" rel="noopener"':""}>${t||e}</a>`;this.execute("insertHTML",i)}}openImageModal(){this.saveSelection();const e=window.getSelection();let t=null;if(e.rangeCount>0){const s=e.getRangeAt(0);1===s.startContainer.nodeType&&"IMG"===s.startContainer.childNodes[s.startOffset]?.nodeName?t=s.startContainer.childNodes[s.startOffset]:"IMG"===e.anchorNode.nodeName&&(t=e.anchorNode)}const s=t?this.getAncestor(t,"A"):null,i=!!t;if(i){const s=document.createRange();s.selectNode(t),e.removeAllRanges(),e.addRange(s),this.saveSelection()}const o=`\n            <label class="se-modal-label">Image URL</label>\n            <input type="text" class="se-modal-input" id="se-img-url" placeholder="https://example.com/image.png" value="${i?t.getAttribute("src"):""}">\n            <label class="se-modal-label">Title / Alt Text</label>\n            <input type="text" class="se-modal-input" id="se-img-title" placeholder="Image description" value="${i&&(t.getAttribute("title")||t.getAttribute("alt"))||""}">\n            <label class="se-modal-label">Link (Optional)</label>\n            <input type="text" class="se-modal-input" id="se-img-link" placeholder="URL to open on click" value="${s?s.getAttribute("href"):""}">\n            <div style="display: flex; gap: 10px;">\n                <div style="flex:1"><label class="se-modal-label">Width (px/%)</label><input type="text" class="se-modal-input" id="se-img-width" placeholder="auto" value="${i?(t.style.width||t.width||"").replace("px",""):""}"></div>\n                <div style="flex:1"><label class="se-modal-label">Height (px/%)</label><input type="text" class="se-modal-input" id="se-img-height" placeholder="auto" value="${i?(t.style.height||t.height||"").replace("px",""):""}"></div>\n            </div>\n        `,n=this.createModal(i?"Edit Image":"Insert Image",o);if(i){const e=document.createElement("button");e.className="se-btn-cancel",e.style.marginRight="auto",e.style.color="#dc3545",e.innerText="Remove Image",e.onclick=()=>{this.restoreSelection(),t&&t.remove(),s&&""===s.innerHTML.trim()&&s.remove(),this.closeModal()};const i=this.modalContainer.querySelector(".se-modal-actions");i.insertBefore(e,i.firstChild)}n.onConfirm=()=>{this.restoreSelection();const e=document.getElementById("se-img-url").value,t=document.getElementById("se-img-title").value,s=document.getElementById("se-img-link").value;let i=document.getElementById("se-img-width").value,o=document.getElementById("se-img-height").value;if(!e)return;i&&!isNaN(i)&&(i+="px"),o&&!isNaN(o)&&(o+="px");let n=`<img src="${e}" alt="${t}" title="${t}" style="${i?"width:"+i+";":""}${o?"height:"+o+";":""}max-width:100%">`;s&&(n=`<a href="${s}" target="_blank">${n}</a>`),this.execute("insertHTML",n)}}initDarkMode(){this.isDarkMode=this.config.darkMode,this.isDarkMode&&this.target.classList.add("se-dark-mode");const e=this.toolbar.querySelector('[data-command="toggleDarkMode"]');e&&(e.innerHTML=this.isDarkMode?this.icons.sun:this.icons.moon,e.title=this.isDarkMode?"Light Mode":"Dark Mode")}toggleDarkMode(){this.isDarkMode=!this.isDarkMode,this.target.classList.toggle("se-dark-mode",this.isDarkMode);const e=this.toolbar.querySelector('[data-command="toggleDarkMode"]');e&&(e.innerHTML=this.isDarkMode?this.icons.sun:this.icons.moon,e.title=this.isDarkMode?"Light Mode":"Dark Mode")}toggleFullScreen(){this.isFullScreen=!this.isFullScreen,this.target.classList.toggle("se-fullscreen",this.isFullScreen),document.body.classList.toggle("se-fullscreen-active",this.isFullScreen);const e=this.toolbar.querySelector('[data-command="fullscreen"]');e&&(e.innerHTML=this.isFullScreen?this.icons.exitFullscreen:this.icons.fullscreen,e.title=this.isFullScreen?"Exit Full Screen":"Full Screen")}createModal(e,t){this.modalContainer.innerHTML=`\n            <div class="se-modal-overlay">\n                <div class="se-modal">\n                    <h3>${e}</h3>\n                    <div class="se-modal-content">${t}</div>\n                    <div class="se-modal-actions">\n                        <button class="se-btn-cancel">Cancel</button>\n                        <button class="se-btn-confirm">Insert</button>\n                    </div>\n                </div>\n            </div>\n        `;const s={onConfirm:()=>{}},i=this.modalContainer.querySelector(".se-modal-overlay");return this.modalContainer.querySelector(".se-btn-confirm").onclick=()=>{s.onConfirm(),this.closeModal()},this.modalContainer.querySelector(".se-btn-cancel").onclick=()=>this.closeModal(),i.onclick=e=>{e.target===i&&this.closeModal()},s}closeModal(){this.modalContainer.innerHTML=""}applyStyles(){if(document.getElementById("se-global-styles"))return;const e=document.createElement("style");e.id="se-global-styles",e.textContent="\n            .se-main-wrapper { border: 1px solid #ddd; border-radius: 10px; background: #fff; font-family: -apple-system, sans-serif; overflow: hidden; margin-bottom: 25px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }\n            .se-toolbar { display: flex; flex-wrap: wrap; gap: 4px; padding: 8px; background: #fdfdfd; border-bottom: 1px solid #eee; align-items: center; position: sticky; top: 0; z-index: 10; }\n            .se-toolbar.source-active .se-btn:not(.se-btn-html), .se-toolbar.source-active .se-select { opacity: 0.3; pointer-events: none; }\n            .se-btn { border: none; background: transparent; padding: 6px; cursor: pointer; border-radius: 5px; display: flex; align-items: center; color: #555; transition: all 0.2s; }\n            .se-btn:hover { background: #f0f0f0; color: #000; }\n            .se-btn.active { background: #e0e0e0; color: #000; box-shadow: inset 0 2px 4px rgba(0,0,0,0.1); }\n            .se-btn-html { border: 1px solid #eee; font-size: 11px; padding: 4px 10px; }\n            .se-btn-html.active { background: #333; color: #fff; border-color: #333; }\n            .se-divider { width: 1px; height: 20px; background: #eee; margin: 0 4px; }\n            .se-select { padding: 4px; border: 1px solid #eee; border-radius: 4px; outline: none; }\n            .se-content { min-height: 350px; padding: 25px; outline: none; line-height: 1.6; font-size: 16px; }\n            .se-source { width: 100%; min-height: 350px; padding: 20px; background: #282c34; color: #abb2bf; border: none; font-family: monospace; box-sizing: border-box; outline: none; display: block; resize: vertical; }\n            .se-content a{ color: #007bff; text-decoration: underline; }\n            .se-content ul {    padding-left: 20px;    list-style: disc; }\n            .se-statusbar { padding: 8px 15px; background: #fdfdfd; border-top: 1px solid #eee; font-size: 11px; color: #999; display: flex; justify-content: space-between; align-items: center; text-transform: uppercase; }\n            .se-modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.6); backdrop-filter: blur(2px); display: flex; align-items: center; justify-content: center; z-index: 1000; }\n            .se-modal { background: #fff; padding: 20px; border-radius: 10px; width: 90%; max-width: 420px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }\n            .se-modal-content { margin: 15px 0; }\n            .se-modal-label { display: block; margin-bottom: 5px; font-size: 12px; font-weight: 600; color: #555; }\n            .se-modal-input { width: 100%; padding: 10px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box; }\n            .se-modal-input:disabled { background: #f5f5f5; cursor: not-allowed; }\n            .se-modal-checkbox { display: flex; align-items: center; gap: 8px; margin: 15px 0; }\n            .se-modal-checkbox input { margin: 0; width: auto; }\n            .se-modal-checkbox label { margin: 0; font-size: 14px; font-weight: normal; }\n            .se-modal-actions { display: flex; justify-content: flex-end; gap: 10px; }\n            .se-btn-confirm { background: #007bff; color: #fff; border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer; font-weight: bold; }\n            .se-btn-cancel { background: #eee; border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer; color: #666; }\n            .se-brand a { color: #007bff; text-decoration: none; font-weight: 600; }\n\n            .se-color-picker-wrapper { position: relative; padding: 0; width: 32px; height: 32px; }\n            .se-color-picker-wrapper svg { margin: 6px; }\n            .se-color-input { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; }\n\n            body.se-fullscreen-active { overflow: hidden; }\n            .se-main-wrapper.se-fullscreen {\n                position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 2000;\n                border-radius: 0; border: none; display: flex; flex-direction: column;\n            }\n            .se-main-wrapper.se-fullscreen .se-editor-window { flex-grow: 1; display: flex; flex-direction: column; }\n            .se-main-wrapper.se-fullscreen .se-content,\n            .se-main-wrapper.se-fullscreen .se-source { height: 100%; flex-grow: 1; }\n\n            .se-main-wrapper.se-dark-mode { background: #1e293b; color: #e2e8f0; border-color: #334155; }\n            .se-main-wrapper.se-dark-mode .se-toolbar { background: #0f172a; border-bottom-color: #334155; }\n            .se-main-wrapper.se-dark-mode .se-btn { color: #94a3b8; }\n            .se-main-wrapper.se-dark-mode .se-btn:hover { background: #334155; color: #e2e8f0; }\n            .se-main-wrapper.se-dark-mode .se-btn.active { background: #475569; color: #fff; }\n            .se-main-wrapper.se-dark-mode .se-select { background: #1e293b; color: #e2e8f0; border-color: #334155; }\n            .se-main-wrapper.se-dark-mode .se-divider { background: #334155; }\n            .se-main-wrapper.se-dark-mode .se-content { color: #e2e8f0; }\n            .se-main-wrapper.se-dark-mode .se-content a { color: #60a5fa; }\n            .se-main-wrapper.se-dark-mode .se-statusbar { background: #0f172a; border-top-color: #334155; color: #94a3b8; }\n            .se-main-wrapper.se-dark-mode .se-brand a { color: #60a5fa; }\n            .se-main-wrapper.se-dark-mode .se-modal { background: #1e293b; }\n            .se-main-wrapper.se-dark-mode .se-modal h3, .se-main-wrapper.se-dark-mode .se-modal-label { color: #e2e8f0; }\n            .se-main-wrapper.se-dark-mode .se-modal-input { background: #0f172a; color: #e2e8f0; border-color: #334155; }\n            .se-main-wrapper.se-dark-mode .se-btn-cancel { background: #334155; color: #e2e8f0; }\n        ",document.head.appendChild(e)}}