const sEditor={config:{selector:"#seditor",plugins:{image:!0,link:!0,source:!0}},savedRange:null,isSourceMode:!1,icons:{undo:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M288-192v-72h288q50 0 85-35t35-85q0-50-35-85t-85-35H330l93 93-51 51-180-180 180-180 51 51-93 93h246q80 0 136 56t56 136q0 80-56 136t-136 56H288Z"/></svg>',redo:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M384-192q-80 0-136-56t-56-136q0-80 56-136t136-56h246l-93-93 51-51 180 180-180 180-51-51 93-93H384q-50 0-85 35t-35 85q0 50 35 85t85 35h288v72H384Z"/></svg>',bold:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M266-192v-576h227.95q67.05 0 123.55 41.32Q674-685.35 674-612q0 51-22.5 79.5T609-490.96Q635-479 665-448t30 91q0 91-67.03 128t-125.81 37H266Zm127-118h104.68Q546-310 556-334.5t10-35.5q0-11-10.5-35.5T494-430H393v120Zm0-232h93q33 0 48.5-17.5T550-597q0-24-17.11-39t-44.28-15H393v109Z"/></svg>',italic:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M216-192v-96h160l124-384H336v-96h408v96H596L472-288h152v96H216Z"/></svg>',underline:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M240-144v-72h480v72H240Zm240-144q-96 0-148.5-59.4T279-504.86V-816h97.21v317.09q0 52.85 26.43 85.88Q429.07-380 480.03-380q50.97 0 77.39-33.03 26.41-33.03 26.41-85.88V-816H681v311.14q0 98.06-52.5 157.46Q576-288 480-288Z"/></svg>',strike:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M486-196q-72 0-126-42t-72-111l81-33q16 51 46.5 77t72.5 26q45 0 71.5-21.5T586-358q0-16-6-29.5T562-412h103q5 11 6.5 23.5T673-359q0 72-52 117.5T486-196ZM96-484v-72h768v72H96Zm384-288q64 0 106 27t68 86l-78 34q-11-30-36.5-48.5T482-692q-37 0-61.5 18T394-628h-87q2-63 51-103.5T480-772Z"/></svg>',link:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M432-288H288q-79.68 0-135.84-56.23Q96-400.45 96-480.23 96-560 152.16-616q56.16-56 135.84-56h144v72H288q-50 0-85 35t-35 85q0 50 35 85t85 35h144v72Zm-96-156v-72h288v72H336Zm192 156v-72h144q50 0 85-35t35-85q0-50-35-85t-85-35H528v-72h144q79.68 0 135.84 56.23 56.16 56.22 56.16 136Q864-400 807.84-344 751.68-288 672-288H528Z"/></svg>',img:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M216-144q-29.7 0-50.85-21.5Q144-187 144-216v-528q0-29 21.15-50.5T216-816h528q29.7 0 50.85 21.5Q816-773 816-744v528q0 29-21.15 50.5T744-144H216Zm0-72h528v-528H216v528Zm48-72h432L552-480 444-336l-72-96-108 144Zm-48 72v-528 528Z"/></svg>',superscript:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M720-576v-95.67Q720-692 733.8-706t34.2-14h48v-48h-96v-48h96q20.4 0 34.2 13.75 13.8 13.76 13.8 34.09v47.83Q864-700 850.2-686T816-672h-48v48h96v48H720ZM270-192l159-250-148-230h90.79L478-501l110-171h91L530-442l160 250h-91L482-378 361-192h-91Z"/></svg>',subscript:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M720-144v-95.67Q720-260 733.8-274t34.2-14h48v-48h-96v-48h96q20.4 0 34.2 13.75 13.8 13.76 13.8 34.09v47.83Q864-268 850.2-254T816-240h-48v48h96v48H720ZM270-288l159-250-148-230h90.79L478-597l110-171h91L530-538l160 250h-91L482-474 361-288h-91Z"/></svg>',leftAlign:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M144-144v-72h672v72H144Zm0-150v-72h480v72H144Zm0-150v-72h672v72H144Zm0-150v-72h480v72H144Zm0-150v-72h672v72H144Z"/></svg>',centerAlign:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M144-144v-72h672v72H144Zm144-150v-72h384v72H288ZM144-444v-72h672v72H144Zm144-150v-72h384v72H288ZM144-744v-72h672v72H144Z"/></svg>',rightAlign:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M144-744v-72h672v72H144Zm192 150v-72h480v72H336ZM144-444v-72h672v72H144Zm192 150v-72h480v72H336ZM144-144v-72h672v72H144Z"/></svg>',justifyAlign:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M144-144v-72h672v72H144Zm0-150v-72h672v72H144Zm0-150v-72h672v72H144Zm0-150v-72h672v72H144Zm0-150v-72h672v72H144Z"/></svg>',unorderedList:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M360-240v-72h456v72H360Zm0-204v-72h456v72H360Zm0-204v-72h456v72H360ZM215.79-204Q186-204 165-225.21t-21-51Q144-306 165.21-327t51-21Q246-348 267-326.79t21 51Q288-246 266.79-225t-51 21Zm0-204Q186-408 165-429.21t-21-51Q144-510 165.21-531t51-21Q246-552 267-530.79t21 51Q288-450 266.79-429t-51 21Zm0-204Q186-612 165-633.21t-21-51Q144-714 165.21-735t51-21Q246-756 267-734.79t21 51Q288-654 266.79-633t-51 21Z"/></svg>',orderedList:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M144-144v-48h96v-24h-48v-48h48v-24h-96v-48h120q10.2 0 17.1 6.9 6.9 6.9 6.9 17.1v48q0 10.2-6.9 17.1-6.9 6.9-17.1 6.9 10.2 0 17.1 6.9 6.9 6.9 6.9 17.1v48q0 10.2-6.9 17.1-6.9 6.9-17.1 6.9H144Zm0-240v-96q0-10.2 6.9-17.1 6.9-6.9 17.1-6.9h72v-24h-96v-48h120q10.2 0 17.1 6.9 6.9 6.9 6.9 17.1v72q0 10.2-6.9 17.1-6.9 6.9-17.1 6.9h-72v24h96v48H144Zm48-240v-144h-48v-48h96v192h-48Zm168 384v-72h456v72H360Zm0-204v-72h456v72H360Zm0-204v-72h456v72H360Z"/></svg>',hr:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M192-444v-72h576v72H192Z"/></svg>',code:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M336-240 96-480l240-240 51 51-189 189 189 189-51 51Zm288 0-51-51 189-189-189-189 51-51 240 240-240 240Z"/></svg>',clear:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="m503-558-73-73-88-88h426v96H531l-28 65ZM768-89 442-415l-76 176H262l107-249L90-767l51-51 678 678-51 51Z"/></svg>'},run:function(t){this.config={...this.config,...t},this.target=document.querySelector(this.config.selector),this.target&&(this.initUI(),this.initEventListeners())},initUI:function(){this.target.className="se-main-wrapper",this.target.innerHTML='\n            <div class="se-toolbar"></div>\n            <div class="se-editor-window">\n                <div class="se-content" contenteditable="true" spellcheck="true"><p>Start typing...</p></div>\n                <textarea class="se-source" style="display:none"></textarea>\n            </div>\n\t\t\t<div class="se-statusbar">\n                <div class="se-stats">\n                    <span id="se-wc">Words: 0</span> | <span id="se-cc">Chars: 0</span>\n                </div>\n                <div class="se-brand">\n\t\t\t\t\tPowered by <a href="https://shalab.netlify.app/" target="_blank" rel="noopener">ShaLab</a>\n\t\t\t\t</div>\n            </div> \n            <div id="se-modal-container"></div>\n        ',this.toolbar=this.target.querySelector(".se-toolbar"),this.editor=this.target.querySelector(".se-content"),this.sourceView=this.target.querySelector(".se-source"),this.modalContainer=this.target.querySelector("#se-modal-container"),this.buildToolbar(),this.applyStyles()},saveSelection:function(){const t=window.getSelection();t.rangeCount>0&&(this.savedRange=t.getRangeAt(0))},restoreSelection:function(){if(this.savedRange){const t=window.getSelection();t.removeAllRanges(),t.addRange(this.savedRange)}},execute:function(t,e=null){this.isSourceMode||(this.editor.focus(),document.execCommand(t,!1,e),this.updateStatus())},buildToolbar:function(){this.createBtn("undo",this.icons.undo,"Undo (Ctrl+Z)"),this.createBtn("redo",this.icons.redo,"Redo (Ctrl+Y)"),this.addDivider();const t=document.createElement("select");t.className="se-select";[{v:"p",t:"Paragraph"},{v:"blockquote",t:"Quote"},{v:"h1",t:"Header 1"},{v:"h2",t:"Header 2"},{v:"h3",t:"Header 3"},{v:"h4",t:"Header 4"}].forEach((e=>t.add(new Option(e.t,e.v)))),t.onchange=t=>this.execute("formatBlock",t.target.value),this.toolbar.appendChild(t),this.addDivider(),this.createBtn("bold",this.icons.bold,"Bold (Ctrl+B)"),this.createBtn("italic",this.icons.italic,"Italic (Ctrl+I)"),this.createBtn("underline",this.icons.underline,"Underline"),this.createBtn("strikeThrough",this.icons.strike,"Strikethrough"),this.createBtn("superscript",this.icons.superscript,"Superscript"),this.createBtn("subscript",this.icons.subscript,"Subscript"),this.createBtn("removeFormat",this.icons.clear,"Remove Format"),this.addDivider(),this.createBtn("justifyLeft",this.icons.leftAlign,"Left"),this.createBtn("justifyCenter",this.icons.centerAlign,"Center"),this.createBtn("justifyRight",this.icons.rightAlign,"Right"),this.createBtn("justifyFull",this.icons.justifyAlign,"Justify"),this.addDivider(),this.createBtn("insertUnorderedList",this.icons.unorderedList,"Unordered List"),this.createBtn("insertOrderedList",this.icons.orderedList,"Ordered List"),this.createBtn("insertHorizontalRule",this.icons.hr,"Horizontal Line"),this.addDivider(),this.config.plugins.link&&this.createBtn("link",this.icons.link,"Insert Link",(()=>this.openLinkModal())),this.config.plugins.image&&this.createBtn("image",this.icons.img,"Insert Image",(()=>this.openImageModal()));const e=document.createElement("button");e.className="se-btn se-btn-html",e.innerHTML=this.icons.code+'<span style="margin-left:5px">View HTML</span>',e.onclick=()=>this.toggleSource(),this.toolbar.appendChild(e)},createBtn:function(t,e,i,n){const s=document.createElement("button");s.className="se-btn",s.innerHTML=e,s.title=i,s.onclick=e=>{e.preventDefault(),this.isSourceMode&&"toggleSource"!==t||(n?(this.saveSelection(),n()):this.execute(t))},this.toolbar.appendChild(s)},addDivider:function(){const t=document.createElement("div");t.className="se-divider",this.toolbar.appendChild(t)},initEventListeners:function(){this.editor.addEventListener("keydown",(t=>{if(t.ctrlKey||t.metaKey){const e=t.key.toLowerCase();"b"===e&&(t.preventDefault(),this.execute("bold")),"i"===e&&(t.preventDefault(),this.execute("italic")),"u"===e&&(t.preventDefault(),this.execute("underline")),"z"===e&&(t.preventDefault(),this.execute("undo")),"y"===e&&(t.preventDefault(),this.execute("redo"))}})),this.editor.oninput=()=>this.updateStatus()},updateStatus:function(){const t=this.editor.innerText.trim();document.getElementById("se-wc").innerText=`Words: ${t?t.split(/\s+/).length:0}`,document.getElementById("se-cc").innerText=`Chars: ${t.length}`},toggleSource:function(){this.isSourceMode=!this.isSourceMode;const t=this.toolbar.querySelector(".se-btn-html");this.isSourceMode?(this.sourceView.value=this.editor.innerHTML,this.editor.style.display="none",this.sourceView.style.display="block",t.classList.add("active"),this.toolbar.classList.add("source-active")):(this.editor.innerHTML=this.sourceView.value,this.sourceView.style.display="none",this.editor.style.display="block",t.classList.remove("active"),this.toolbar.classList.remove("source-active"))},openLinkModal:function(){const t=this.savedRange?this.savedRange.toString():"";this.createModal("Insert Link",`\n            <input type="text" id="se-link-url" placeholder="https://...">\n            <input type="text" id="se-link-text" placeholder="Link Text" value="${t}">\n            <input type="text" id="se-link-title" placeholder="Hover Title">\n            <select id="se-link-target">\n                <option value="_blank">New Window</option>\n                <option value="_self">Same Window</option>\n            </select>\n        `).onConfirm=()=>{const t=document.getElementById("se-link-url").value,e=document.getElementById("se-link-text").value||t,i=document.getElementById("se-link-title").value,n=document.getElementById("se-link-target").value;if(t){this.restoreSelection();const s=`<a href="${t}" title="${i}" target="${n}">${e}</a>`;document.execCommand("insertHTML",!1,s)}}},openImageModal:function(){this.createModal("Insert Image",'\n            <input type="text" id="se-img-url" placeholder="Image URL">\n            <input type="text" id="se-img-alt" placeholder="Alt Description">\n            <div style="display:flex; gap:5px">\n                <input type="text" id="se-img-w" placeholder="Width (e.g. 100%)">\n                <input type="text" id="se-img-h" placeholder="Height (auto)">\n            </div>\n        ').onConfirm=()=>{const t=document.getElementById("se-img-url").value,e=document.getElementById("se-img-alt").value,i=document.getElementById("se-img-w").value,n=document.getElementById("se-img-h").value;if(t){this.restoreSelection();const s=`<img src="${t}" alt="${e}" style="width:${i||"auto"}; height:${n||"auto"}; max-width:100%;">`;document.execCommand("insertHTML",!1,s)}}},createModal:function(t,e){this.modalContainer.innerHTML=`\n            <div class="se-modal-overlay">\n                <div class="se-modal">\n                    <h3>${t}</h3>\n                    ${e}\n                    <div class="se-modal-actions">\n                        <button class="se-btn-cancel" onclick="sEditor.closeModal()">Cancel</button>\n                        <button class="se-btn-confirm" id="se-btn-confirm">Insert</button>\n                    </div>\n                </div>\n            </div>\n        `;const i={onConfirm:()=>{}};return document.getElementById("se-btn-confirm").onclick=()=>{i.onConfirm(),this.closeModal()},i},closeModal:function(){this.modalContainer.innerHTML=""},applyStyles:function(){const t=document.createElement("style");t.textContent="\n            .se-main-wrapper { border: 1px solid #ddd; border-radius: 10px; background: #fff; font-family: -apple-system, system-ui, sans-serif; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }\n            .se-toolbar { display: flex; flex-wrap: wrap; gap: 4px; padding: 8px; background: #fdfdfd; border-bottom: 1px solid #eee; position: sticky; top: 0; z-index: 10; align-items: center; }\n            .se-toolbar.source-active .se-btn:not(.se-btn-html), .se-toolbar.source-active .se-select { opacity: 0.3; pointer-events: none; }\n            .se-btn { border: none; background: transparent; padding: 6px; cursor: pointer; border-radius: 5px; display: flex; align-items: center; justify-content: center; color: #555; transition: 0.2s; }\n            .se-btn:hover { background: #f0f0f0; color: #000; }\n            .se-btn svg { fill: currentColor; }\n            .se-btn-html { margin-left: auto; color: #666; font-size: 12px; border: 1px solid #eee; padding: 4px 10px; }\n            .se-btn-html.active { background: #333; color: #fff; border-color: #333; }\n            .se-divider { width: 1px; height: 20px; background: #eee; margin: 0 4px; }\n            .se-select { padding: 4px 8px; border: 1px solid #eee; border-radius: 5px; background: #fff; outline: none; cursor: pointer; }\n            .se-content { min-height: 400px; padding: 30px; outline: none; line-height: 1.7; font-size: 16px; color: #333; }\n            .se-source { width: 100%; height: 400px; padding: 25px; border: none; background: #282c34; color: #abb2bf; font-family: 'Fira Code', monospace; font-size: 14px; box-sizing: border-box; outline: none; line-height: 1.5; }\n            .se-statusbar { padding: 8px 15px; background: #fdfdfd; border-top: 1px solid #eee; font-size: 11px; color: #999; text-transform: uppercase; letter-spacing: 0.5px; }\n            .se-modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.6); backdrop-filter: blur(2px); display: flex; align-items: center; justify-content: center; z-index: 1000; }\n            .se-modal { background: #fff; padding: 25px; border-radius: 12px; width: 320px; display: flex; flex-direction: column; gap: 12px; box-shadow: 0 20px 50px rgba(0,0,0,0.3); }\n            .se-modal h3 { margin: 0 0 5px 0; font-size: 18px; color: #222; }\n            .se-modal input, .se-modal select { padding: 10px; border: 1px solid #ddd; border-radius: 7px; width: 100%; box-sizing: border-box; outline: none; font-size: 14px; }\n            .se-modal input:focus { border-color: #007bff; }\n            .se-modal-actions { display: flex; justify-content: flex-end; gap: 10px; margin-top: 10px; }\n            .se-btn-confirm { background: #007bff; color: #fff; border: none; padding: 10px 20px; border-radius: 7px; cursor: pointer; font-weight: 600; }\n            .se-btn-cancel { background: #f5f5f5; border: none; padding: 10px 20px; border-radius: 7px; cursor: pointer; color: #666; }\n\t\t\t.se-statusbar { \n                padding: 8px 15px; \n                background: #fdfdfd; \n                border-top: 1px solid #eee; \n                font-size: 11px; \n                color: #999; \n                text-transform: uppercase; \n                letter-spacing: 0.5px;\n                display: flex;             /* Added Flexbox */\n                justify-content: space-between; /* Push items to opposite ends */\n                align-items: center;\n            }\n\n            .se-brand a {\n                color: #007bff;\n                text-decoration: none;\n                font-weight: 600;\n                transition: 0.2s;\n            }\n\n            .se-brand a:hover {\n                color: #0056b3;\n                text-decoration: underline;\n            }\n        ",document.head.appendChild(t)}};